<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Diatonic Vocoder | skarja.la</title>
        <link rel="stylesheet" href="../../styles.css" />
    </head>
    <body id="root-container" class="root-container">
        <div class="document-content-container">
            <div class="project-page-container">
                <div class="header-container">
                    <div class="header-title">
                        <a href="../.." class="invisilink">
                            <div class="header-name">
                                skarjala
                            </div>
                        </a>
                        <div style="min-width: 4em;">â€¢</div>
                        <div class="header-contact">
                            spencerkarjala@gmail.com
                        </div>
                    </div>
                    <hr style="width:100%; height:0;" />
                    <div class="nav-container">
                        <a class="nav-item" href="../../about.html">About</a>
                        <a class="nav-item" href="../../experience.html">Experience</a>
                        <a class="nav-item" href="../../projects.html">Projects</a>
                    </div>
                </div>

                <div class="elevated-container">
                    <div class="elevated-container-label">
                        DEMO
                    </div>
                    <div class="elevated-container-content generic-flex-container-vertical">
                        <p class="elevated-container-text">
                            Below is a recording of me playing four guitar chords - no effects are applied
                            for a baseline comparison.
                        </p>
                        <div class="generic-flex-container-vertical">
                            <audio class="generic-flex-child-centered" controls>
                                <source src="./demo01-noeffect.mp3">
                                Audio is not supported by your browser :(
                            </audio>
                        </div>
                        <div style="height: 1rem"></div>
                        <p class="elevated-container-text">
                            The next clip uses the diatonic vocoder effect to remove all parts of the sound
                            that correspond to C, D, and E notes. Notice that some of the notes have vanished,
                            and that the sound is more muted/missing high-end. Also, the bass note (C) on the
                            third chord has vanished.
                        </p>
                        <div class="generic-flex-container-vertical">
                            <audio class="generic-flex-child-centered" controls>
                                <source src="./demo02-noCDE.mp3">
                                Audio is not supported by your browser :(
                            </audio>
                        </div>
                        <div style="height: 1rem"></div>
                        <p class="elevated-container-text">
                            This third clip does the opposite of the second clip - it silences the parts of
                            the sound that DON'T correspond to the C, D, and E notes. This clip is noticeably
                            quieter (since most of the sound is filtered out!), but that low C on the third
                            chord is back!
                        </p>
                        <div class="generic-flex-container-vertical">
                            <audio class="generic-flex-child-centered" controls>
                                <source src="./demo03-onlyCDE.mp3">
                                Audio is not supported by your browser :(
                            </audio>
                        </div>
                        <div style="height: 1rem"></div>
                        <p class="elevated-container-text">
                            Just for fun, this is what the effect sounds like when applied to drums. This
                            example just quickly automates between a few arbitrary chords. Near the end,
                            you can hear what it sounds like when only a couple note bands are let through.
                        </p>
                        <div class="generic-flex-container-vertical">
                            <audio class="generic-flex-child-centered" controls>
                                <source src="./demo04-drums.mp3">
                                Audio is not supported by your browser :(
                            </audio>
                        </div>
                    </div>
                </div>
                <div class="project-page-padding"></div>
                <div class="project-page-content">
                    <p>
                        A common problem that I run into when designing sounds is that the harmonic content
                        of my sound does not align with whichever composition I'm working on. For example, consider
                        the following sound:
                    </p>
                    <div class="horizontal-center-content">
                        <audio controls>
                            <source src="./guitarchords.mp3" type="audio/mpeg">
                            Audio is not supported by your browser :(
                        </audio>
                    </div>
                    <p>
                        Sometimes, I would like to delete parts of the signal that correspond to specific notes, so
                        I built this "diatonic vocoder" effect for that purpose. 
                    </p>

                    <p>
                        
                    </p>

                    <h3>FFT Buffer</h3>
                    <p>
                        The main problem to tackle here is the FFT. At a high level, we can view the audio effect
                        as a system with the following behavior:
                    </p>
                    <div class="horizontal-center-content">
                        <img src="./fftsystem.png" />
                    </div>
                    <div class="code-block-container">
                        <div class="code-block-padding"></div>
                        <div class="code-block">
                            <div class="code-block-line"><code-comment>// step 1: write incoming audio data to FFT buffer</code-comment></div>
                            <div class="code-block-line">for (int i = 0; i < n_samples; ++i) {</div>
                            <div class="code-block-line">    fft_buffer.write_sample(audio_buffer[i]);</div>
                            <div class="code-block-line">}</div>
                            <div class="code-block-line"> </div>
                            <div class="code-block-line"><code-comment>// step 2: </code-comment></div>
                        </div>
                        <div class="code-block-padding"></div>
                    </div>
                </div>
                <div class="project-page-padding"></div>
            </div>
            <div class="footer-container">
                <hr style="width: 50%" />
                <a id="totop" href="#" class="invisilink">
                    ^
                </a>
            </div>
        </div>
    </body>
</html>